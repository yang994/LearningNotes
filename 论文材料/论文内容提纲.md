# WritePay 写支付

+ 时空支付合约过程，列举安全漏洞
+ 门限签名算法 
  + Threshold Signature
  + ECDSA Signature
  + Schonrr Signature
  + Group Signature


# 智能合约

## 区块链
  去中心化的数据库，系统中的参与者都拥有一个完整的信息副本，通过共识算法，保证每一个参与者拥有的副本与他人的副本保持一致

## 智能合约和时空支付
  + 部署在区块链系统上的一段程序，由运行区块链系统的计算机执行，用于接受、存储、处理信息以及发送信息，去中心化的特性可以使智能合约在没有第三方的条件下实现可信交易。
  + 合约部署流程：编写智能合约->编译EVM字节码->将编译好的字节码发送到区块链网络中（花费gas）->矿工挖矿写入区块链->获得合约账户地址以及调用合约所需的接口
  + 合约执行：调用合约（花费gas）-> 合约在本地EVM上执行-> 大多数节点达成共识 -> 合约状态改变
  + 时空支付流程（User 的Keeper：k1、k2、k3；Provider：p1）：User部署时空支付合约 -> Keeper组定时对Provider进行挑战获取挑战结果，在组内同步 -> Keeper组主节点调用合约进行支付（花费gas）-> 支付成功，主节点将支付结果在组内同步

## 交易模型
  + 比特币UTXO：未花费交易输出
    一笔交易的输入必定是之前某一笔交易的输出，如A有20 转给B 10 A还剩10：认为交易输入20，交易输出A10 B10。当前账户的余额需要整合该账户的所有交易历史
  + 以太坊账户模型：
    账户分为2种：`外部账户` 普通用户的账户；`合约账户`：部署在链上智能合约对应的账户  
    每个账户维护自己的状态，理解为一组账户相关的变量，余额直接记录在账户的状态之中。所有账户的状态为以太坊系统的状态。每次交易 账户会进行一次状态转换

## 签名算法
  用于数据加密传输，私钥`签名`--加密数据 公钥`验签`--证明数据真实  
  对于数据D 私钥Sk 公钥Pk 签名算法f(a,b) 验签算法g(a,b)
  签名:(S,H)=f(D,Sk)  验签：H==(S,Pk)?  
  + 门限签名
    